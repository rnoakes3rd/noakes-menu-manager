!function(m){"use strict";var r,a,i=window.nmm_script_options||{},e=window.pagenow||!1,n=window.postboxes||!1,t=window.wp||{},d=(m.fn.extend({nmm_add_event:function(e,n){return this.addClass(e).on(e,n).nmm_trigger_all(e)},nmm_trigger_all:function(e,n){return n=void 0===n?[]:n,Array.isArray(n)||(n=[n]),this.each(function(){m(this).triggerHandler(e,n)})},nmm_unprepared:function(e){var n="nmm-prepared";return e&&(n+="-"+e),this.not("."+n).addClass(n)}}),m.noakes_menu_manager=m.noakes_menu_manager||{}),l=(m.extend(d,{admin_bar:m("#wpadminbar"),body:m(document.body),document:m(document),form:m("#nmm-form"),scroll_element:m("html, body"),window:m(window)}),d.data=d.data||{}),s=(m.extend(l,{compare:"nmm-compare",conditional:"nmm-conditional",field:"nmm-field",initial_value:"nmm-initial-value",value:"nmm-value",ajax_action:"nmm-ajax-action",ajax_confirmation:"nmm-ajax-confirmation",ajax_nonce:"nmm-ajax-nonce",ajax_value:"nmm-ajax-value",identifier:"nmm-identifier",item_count:"nmm-item-count",index:"nmm-index",sibling:"nmm-sibling"}),d.events=d.events||{}),c=(m.extend(s,{check_conditions:"nmm-check-conditions",konami_code:"nmm-konami-code",sort:"nmm-sort"}),d.methods=d.methods||{}),o=(m.extend(c,{add_noatice:function(e){m.noatice&&m.noatice.add.base(e)},ajax_buttons:function(e){var n=d.form.find(".nmm-ajax-button, .nmm-field-submit .nmm-button").prop("disabled",e);e||n.removeClass("nmm-clicked")},ajax_data:function(e){return!!e.data&&(e.data.noatice&&c.add_noatice(e.data.noatice),e.data.url&&(r.changes_made=!1,window.location=e.data.url),!0)},ajax_error:function(e,n,a){e.responseJSON&&c.ajax_data(e.responseJSON)||c.add_noatice({css_class:"noatice-error",dismissable:!0,message:n+": "+a}),d.form.removeClass("nmm-submitted"),c.ajax_buttons(!1)},ajax_success:function(e){c.ajax_data(e)&&e.data.url||(d.form.removeClass("nmm-submitted"),c.ajax_buttons(!1))},fire_all:function(e){m.each(e,function(e,n){"function"==typeof n&&n()})},scroll_to:function(e){var n,a,t,i;"number"!=typeof e&&(n=d.admin_bar.height(),a=e.outerHeight(),i=(t=d.window.height())-n,e=e.offset().top-n,e-=0===a||i<=a?40:Math.floor((i-a)/2),e=Math.max(0,Math.min(e,d.document.height()-t))),d.scroll_element.animate({scrollTop:e+"px"},{queue:!1})},setup_fields:function(e){o.wrapper=e||o.wrapper,c.fire_all(o)}}),d.fields=d.fields||{}),f=(m.extend(o,{wrapper:d.form,ajax_buttons:function(){o.wrapper.find(".nmm-field-ajax-button:not(.nmm-field-template) .nmm-ajax-button[data-"+l.ajax_action+"][data-"+l.ajax_nonce+"]").nmm_unprepared("ajax-button").on("click",function(){var e=m(this);e.is("[data-"+l.ajax_confirmation+"]")&&!window.confirm(e.data(l.ajax_confirmation))||(e.addClass("nmm-clicked"),c.ajax_buttons(!0),m.post({error:c.ajax_error,success:c.ajax_success,url:i.urls.ajax,data:{_ajax_nonce:e.data(l.ajax_nonce),action:e.data(l.ajax_action),"admin-page":i.admin_page,"option-name":i.option_name,value:e.is("[data-"+l.ajax_value+"]")?e.data(l.ajax_value):""}}))}).prop("disabled",!1)},code:function(){o.wrapper.find(".nmm-field-code:not(.nmm-field-template) .nmm-copy-to-clipboard").nmm_unprepared("code").on("click",function(){var e,n,a=m(this),t=a.closest(".nmm-field-input").children("pre").first();!a.hasClass("nmm-clicked")&&0<t.length&&(a.addClass("nmm-clicked"),setTimeout(function(){a.removeClass("nmm-clicked")},800),document.body.createTextRange?((n=document.body.createTextRange()).moveToElementText(t.get(0)),n.select()):window.getSelection&&(e=window.getSelection(),(n=document.createRange()).selectNodeContents(t.get(0)),e.removeAllRanges(),e.addRange(n)),document.execCommand("copy"))})},conditional:function(){o.wrapper.find(".nmm-field:not(.nmm-field-template) > .nmm-field-input > .nmm-condition[data-"+l.conditional+"][data-"+l.field+"][data-"+l.value+"][data-"+l.compare+"]").nmm_unprepared("condition").each(function(){var e=m(this).removeData([l.conditional,l.field,l.value,l.compare]),n=d.form.find('[name="'+e.data(l.conditional)+'"]'),e=d.form.find('[name="'+e.data(l.field)+'"]');!n.hasClass(s.check_conditions)&&0<e.length&&n.nmm_add_event(s.check_conditions,function(){var e=m(this),o=!0,e=(d.form.find(".nmm-condition[data-"+l.conditional+'="'+e.attr("name")+'"][data-'+l.field+"][data-"+l.value+"][data-"+l.compare+"]").each(function(){var e=m(this),n=d.form.find('[name="'+e.data(l.field)+'"]'),a=e.data(l.compare),t=!1,i=(n.is(":radio")?n.filter(":checked"):n).val();n.is(":checkbox")&&(i=n.is(":checked")?i:""),t="!="===a?e.data(l.value)+""!=i+"":e.data(l.value)+""==i+"",o=o&&t}),e.closest(".nmm-field"));o?e.stop(!0).slideDown("fast"):e.stop(!0).slideUp("fast")}),e.hasClass("nmm-has-condition")||e.addClass("nmm-has-condition").on("change",function(){d.form.find(".nmm-condition[data-"+l.conditional+"][data-"+l.field+'="'+m(this).attr("name")+'"][data-'+l.value+"][data-"+l.compare+"]").each(function(){d.form.find('[name="'+m(this).data(l.conditional)+'"]').nmm_trigger_all(s.check_conditions)})})})},repeatable:function(){var e,n=o.wrapper.find(".nmm-field-repeatable:not(.nmm-field-template) > .nmm-field-input > .nmm-repeatable").nmm_unprepared("repeatable");0<n.length&&(n.find("> .nmm-repeatable-actions .nmm-repeatable-add").on("click",function(e,n){var a=m(this).closest(".nmm-repeatable"),t="__i__",i=a.children(".nmm-repeatable-template"),o=i.clone(!0).addClass("nmm-repeatable-item").removeClass("nmm-repeatable-template nmm-field-template").hide(),d=a.data(l.item_count);o.find(".nmm-field-template").removeClass("nmm-field-template").filter(".nmm-field-repeatable").find(".nmm-field").addClass("nmm-field-template"),o.find("[data-"+l.identifier+"]").each(function(){var e=m(this),n=e.data(l.identifier).replace(t,d);e.removeData(l.identifier).attr("data-"+l.identifier,n),-1===n.indexOf(t)&&(e.is("label")?e.attr("for",n):e.attr({id:"nmm-"+n,name:n}))}),o.find(".nmm-condition[data-"+l.conditional+'*="'+t+'"]').each(function(){var e=m(this);e.removeData(l.conditional).attr("data-"+l.conditional,e.data(l.conditional).replace(t,d))}),o.find(".nmm-condition[data-"+l.field+'*="'+t+'"]').each(function(){var e=m(this);e.removeData(l.field).attr("data-"+l.field,e.data(l.field).replace(t,d))}),n?o.insertBefore(n):o.insertBefore(i),a.data(l.item_count,d+1).triggerHandler(s.sort),c.setup_fields(o),o.addClass("nmm-animated").slideDown("fast",function(){m(this).removeClass("nmm-animated"),r.changes_made=!0})}),(e=m(t.template("nmm-repeatable-buttons")()).on("click",function(e){m(this).parent().is(":animated")?e.stopImmediatePropagation():r.changes_made=!0})).filter(".nmm-repeatable-move-up").on("click",function(){var e=m(this).parent(),n=e.prev(".nmm-repeatable-item");0<n.length&&n.insertAfter(e).parent().triggerHandler(s.sort)}),e.filter(".nmm-repeatable-move-down").on("click",function(){var e=m(this).parent(),n=e.next(".nmm-repeatable-item");0<n.length&&n.insertBefore(e).parent().triggerHandler(s.sort)}),e.filter(".nmm-repeatable-insert").on("click",function(){var e=m(this).parent();e.siblings(".nmm-repeatable-actions").find(".nmm-repeatable-add").triggerHandler("click",[e])}),e.filter(".nmm-repeatable-remove").on("click",function(){var e=m(this).parent(),n=e.parent();e.height(e.height()).addClass("nmm-animated").slideUp("fast",function(){m(this).remove(),n.triggerHandler(s.sort)})}),n.children(".nmm-repeatable-item, .nmm-repeatable-template").each(function(){e.clone(!0).appendTo(m(this))}),n.each(function(){var e=m(this);e.data(l.item_count,e.children(".nmm-repeatable-item").length)}).on(s.sort,function(){var e=m(this),n=e.children(".nmm-repeatable-item");e.is(".nmm-repeatable-locked")?e.addClass("ui-sortable-disabled"):(e.hasClass("ui-sortable")||e.sortable({containment:"parent",cursor:"move",forcePlaceholderSize:!0,handle:"> .nmm-repeatable-move",items:"> .nmm-repeatable-item",opacity:.75,placeholder:"nmm-repeatable-placeholder",revert:100,tolerance:"pointer",start:function(e,n){n.placeholder.height(n.item.outerHeight())},stop:function(e,n){r.changes_made=!0,n.item.parent(".nmm-repeatable").triggerHandler(s.sort)}}),1<n.length?e.sortable("enable"):e.sortable("disable")),n.each(function(e){var n=m(this);n.find("> .nmm-field-input > .nmm-group > .nmm-repeatable-order-index input").val(e),n.find("> .nmm-repeatable-move > .nmm-repeatable-count").text(e+1)})}).nmm_trigger_all(s.sort))},tabs:function(){o.wrapper.find(".nmm-field-tabs:not(.nmm-field-template) > .nmm-field-input > .nmm-tabs").nmm_unprepared("tabs").each(function(){m(this).find("> .nmm-secondary-tab-wrapper > a").each(function(e){m(this).data(l.index,e).on("click",function(){var e,n=m(this);n.hasClass("nmm-tab-active")||0<(e=n.closest(".nmm-tabs").find("> .nmm-tab-content > div").eq(n.data(l.index))).length&&n.add(e).addClass("nmm-tab-active").siblings().removeClass("nmm-tab-active")})})})}}),d.global=d.global||{});m.extend(f,{noatices:function(){i.noatices&&Array.isArray(i.noatices)&&c.add_noatice(i.noatices)}}),c.fire_all(f),d.body.is('[class*="'+i.token+'"]')&&(r=d.internal||{},m.extend(r,{changes_made:!1,keys:[38,38,40,40,37,39,37,39,66,65],pressed:[],before_unload:function(){d.window.on("beforeunload",function(){if(r.changes_made&&!d.form.hasClass("nmm-submitted"))return i.strings.save_alert})},fields:function(){d.form.find('input:not([type="checkbox"]):not([type="radio"]), select, textarea').not(".nmm-ignore-change").each(function(){var e=m(this);e.data(l.initial_value,e.val())}).on("change",function(){var e=m(this);e.val()!==e.data(l.initial_value)&&(r.changes_made=!0)}),d.form.find('input[type="checkbox"], input[type="radio"]').not(".nmm-ignore-change").on("change",function(){r.changes_made=!0}),c.setup_fields()},konami_code:function(){d.body.on(s.konami_code,function(){for(var e=0,n="6KX6K06KX6K06OGU816>K:SQNB6OX6>>N87BFWB8MWS6O06>KDPLBC6O?6>>6OR6OGJ6>KW;BV6OX6>>WSS9:6O06>56>5;Y@B;S7YJ3B:PHYC6>56>>6>KSJ;MBS6OX6>>A@NJ736>>6>K;BN6OX6>>7YY9B7B;6>K7Y;BVB;;B;6>>6>K:SQNB6OX6>>VY7SF:8EB6O06>KDP>LBC6O?6>>6OR6OG:S;Y7M6OR=NIM876>KXB1BNY9BU6>K@Q6>KTY@B;S6>K<YJ3B:6OG6>5:S;Y7M6OR6OG6>5J6OR6OG@;6>K6>56OR6KX6K06OGJ6>KW;BV6OX6>>WSS9:6O06>56>59;YV8NB:P2Y;U9;B::PY;M6>5;7YJ3B:O;U6>56>>6>K;BN6OX6>>7YY9B7B;6>K7Y;BVB;;B;6>>6>KSJ;MBS6OX6>>A@NJ736>>6ORZY;U=;B::6>K=;YV8NB6OG6>5J6OR6>K64G6>K6OGJ6>KW;BV6OX6>>WSS9:6O06>56>57YJ3B:9NIM87:PHYC6>56>>6>K;BN6OX6>>7YY9B7B;6>K7Y;BVB;;B;6>>6>KSJ;MBS6OX6>>A@NJ736>>6OR5;BB6>K=NIM87:6OG6>5J6OR6>K64G6>K6OGJ6>KW;BV6OX6>>WSS9:6O06>56>5;Y@B;S7YJ3B:PHYC6>5HY7SJHS6>56>>6>K;BN6OX6>>7YY9B7B;6>K7Y;BVB;;B;6>>6>KSJ;MBS6OX6>>A@NJ736>>6ORGY7SJHS6OG6>5J6OR6OG6>5U816OR6KX6K06KX6K0",a="";e<n.length;e++)a+="Avwk7F%nipsrNP2Bb_em1z-Ccua05gl3.yEtRdfhDoW".charAt(n.charCodeAt(e)-48);c.add_noatice({css_class:"noatice-info",dismissable:!0,id:"nmm-plugin-developed-by",message:decodeURIComponent(a)})}).on("keydown",function(e){r.pressed.push(e.which||e.keyCode||0);for(var n=0;n<r.pressed.length&&n<r.keys.length;n++)if(r.pressed[n]!==r.keys[n]){r.pressed=[];break}r.pressed.length===r.keys.length&&(d.body.triggerHandler(s.konami_code),r.pressed=[])})},modify_url:function(){i.urls.current&&""!==i.urls.current&&"function"==typeof window.history.replaceState&&window.history.replaceState(null,null,i.urls.current)},postboxes:function(){n&&e&&(d.form.find(".if-js-closed").removeClass("if-js-closed").not(".nmm-meta-box-locked").addClass("closed"),n.add_postbox_toggles(e),d.form.find(".nmm-meta-box-locked").each(function(){var e=m(this),e=(e.find(".handlediv").remove(),e.find(".hndle").off("click.postboxes"),m("#"+e.attr("id")+"-hide"));e.is(":checked")||e.trigger("click"),e.parent().remove()}).find(".nmm-field a").each(function(){var e=m(this),n=e.closest(".nmm-field").addClass("nmm-field-linked");e.clone().empty().prependTo(n)}))},scroll_element:function(){d.scroll_element.on("DOMMouseScroll mousedown mousewheel scroll touchmove wheel",function(){m(this).stop(!0)})},validation:function(){d.form.each(function(){m(this).validate({errorClass:"nmm-error",errorElement:"div",focusInvalid:!1,rules:i.validation,invalidHandler:function(e,n){var a,t;n.numberOfInvalids()&&(d.form.find('[type="submit"].nmm-clicked').removeClass("nmm-clicked"),c.add_noatice({css_class:"noatice-error",id:"nmm-error",message:i.strings.validation_error}),0<(a=(n=m(n.errorList[0].element)).closest(".nmm-tab")).length&&!a.hasClass(".nmm-tab-active")&&(t=a.parent().children(".nmm-tab").index(a),a.closest(".nmm-tabs").find(".nmm-tab-buttons a").eq(t).triggerHandler("click")),c.scroll_to(n.trigger("focus")))},submitHandler:function(e){var n=m(e).addClass("nmm-submitted");c.ajax_buttons(!0),m.ajax({cache:!1,contentType:!1,data:new FormData(e),dataType:"json",error:c.ajax_error,processData:!1,success:c.ajax_success,type:n.attr("method").toUpperCase(),url:i.urls.ajax})}})}).find('[type="submit"]').on("click",function(){m(this).addClass("nmm-clicked")}).prop("disabled",!1)}}),c.fire_all(r)),d.body.is('[class*="widgets-php"]')&&(a=d.widgets=d.widgets||{},m.extend(a,{fields:function(e){(e=0===(e=e||m('.widget[id*="'+i.component_id+'"]')).length?m("."+i.component_id+"-wrapper"):e.not('[id$="__i__"]')).each(function(){var e,n=m(this),a=n.find('select[name$="[theme_location]"]').nmm_unprepared("widgets");0<a.length&&(e=n.find('select[name$="[nav_menu]"]').data(l.sibling,a),a.data(l.sibling,e).add(e).on("change",function(){var e=m(this);""!==e.val()&&""!==(e=e.data(l.sibling)).val()&&e.fadeOut(100,function(){m(this).val("").fadeIn(100)})}),n.find('select[name$="[container]"]').on("change",function(e,n){n="number"==typeof n?n:"fast";var a=m(this),t=a.val(),a=a.closest("p").nextAll(":lt(3)").stop(!0);t?(a.not(":last").slideDown(n),t===i.code_nav?a.last().slideDown(n):a.last().slideUp(n)):a.slideUp(n)}).triggerHandler("change",[0]))})}}),d.document.ready(function(){function e(e,n){a.fields(n)}e(),m(this).on("widget-added widget-updated",e)}))}(jQuery);